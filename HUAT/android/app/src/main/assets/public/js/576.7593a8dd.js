"use strict";(self["webpackChunkHUAT"]=self["webpackChunkHUAT"]||[]).push([[576],{576:(e,t,s)=>{s.r(t),s.d(t,{scopeCss:()=>P});
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 *
 * This file is a port of shadowCSS from webcomponents.js to TypeScript.
 * https://github.com/webcomponents/webcomponentsjs/blob/4efecd7e0e/src/ShadowCSS/ShadowCSS.js
 * https://github.com/angular/angular/blob/master/packages/compiler/src/shadow_css.ts
 */
const r=e=>{const t=[];let s=0;e=e.replace(/(\[[^\]]*\])/g,((e,r)=>{const c=`__ph-${s}__`;return t.push(r),s++,c}));const r=e.replace(/(:nth-[-\w]+)(\([^)]+\))/g,((e,r,c)=>{const o=`__ph-${s}__`;return t.push(c),s++,r+o})),c={content:r,placeholders:t};return c},c=(e,t)=>t.replace(/__ph-(\d+)__/g,((t,s)=>e[+s])),o="-shadowcsshost",n="-shadowcssslotted",l="-shadowcsscontext",i=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",a=new RegExp("("+o+i,"gim"),p=new RegExp("("+l+i,"gim"),h=new RegExp("("+n+i,"gim"),u=o+"-no-combinator",g=/-shadowcsshost-no-combinator([^\s]*)/,d=[/::shadow/g,/::content/g],m="([>\\s~+[.,{:][\\s\\S]*)?$",f=/-shadowcsshost/gim,$=/:host/gim,x=/::slotted/gim,_=/:host-context/gim,w=/\/\*\s*[\s\S]*?\*\//g,b=e=>e.replace(w,""),S=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g,W=e=>e.match(S)||[],k=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,O=/([{}])/g,j=/(^.*?[^\\])??((:+)(.*)|$)/,E="{",R="}",T="%BLOCK%",C=(e,t)=>{const s=L(e);let r=0;return s.escapedString.replace(k,((...e)=>{const c=e[2];let o="",n=e[4],l="";n&&n.startsWith("{"+T)&&(o=s.blocks[r++],n=n.substring(T.length+1),l="{");const i={selector:c,content:o},a=t(i);return`${e[1]}${a.selector}${e[3]}${l}${a.content}${n}`}))},L=e=>{const t=e.split(O),s=[],r=[];let c=0,o=[];for(let l=0;l<t.length;l++){const e=t[l];e===R&&c--,c>0?o.push(e):(o.length>0&&(r.push(o.join("")),s.push(T),o=[]),s.push(e)),e===E&&c++}o.length>0&&(r.push(o.join("")),s.push(T));const n={escapedString:s.join(""),blocks:r};return n},U=e=>(e=e.replace(_,l).replace($,o).replace(x,n),e),A=(e,t,s)=>e.replace(t,((...e)=>{if(e[2]){const t=e[2].split(","),r=[];for(let c=0;c<t.length;c++){const o=t[c].trim();if(!o)break;r.push(s(u,o,e[3]))}return r.join(",")}return u+e[3]})),B=(e,t,s)=>e+t.replace(o,"")+s,H=e=>A(e,a,B),I=(e,t,s)=>t.indexOf(o)>-1?B(e,t,s):e+t+s+", "+t+" "+e+s,K=(e,t)=>{const s="."+t+" > ",r=[];return e=e.replace(h,((...e)=>{if(e[2]){const t=e[2].trim(),c=e[3],o=s+t+c;let n="";for(let s=e[4]-1;s>=0;s--){const t=e[5][s];if("}"===t||","===t)break;n=t+n}const l=n+o,i=`${n.trimRight()}${o.trim()}`;if(l.trim()!==i.trim()){const e=`${i}, ${l}`;r.push({orgSelector:l,updatedSelector:e})}return o}return u+e[3]})),{selectors:r,cssText:e}},M=e=>A(e,p,I),q=e=>d.reduce(((e,t)=>e.replace(t," ")),e),v=e=>{const t=/\[/g,s=/\]/g;return e=e.replace(t,"\\[").replace(s,"\\]"),new RegExp("^("+e+")"+m,"m")},y=(e,t)=>{const s=v(t);return!s.test(e)},z=(e,t)=>e.replace(j,((e,s="",r,c="",o="")=>s+t+c+o)),D=(e,t,s)=>{if(f.lastIndex=0,f.test(e)){const t=`.${s}`;return e.replace(g,((e,s)=>z(s,t))).replace(f,t+" ")}return t+" "+e},F=(e,t,s)=>{const o=/\[is=([^\]]*)\]/g;t=t.replace(o,((e,...t)=>t[0]));const n="."+t,l=e=>{let r=e.trim();if(!r)return"";if(e.indexOf(u)>-1)r=D(e,t,s);else{const t=e.replace(f,"");t.length>0&&(r=z(t,n))}return r},i=r(e);e=i.content;let a,p="",h=0;const g=/( |>|\+|~(?!=))\s*/g,d=e.indexOf(u)>-1;let m=!d;while(null!==(a=g.exec(e))){const t=a[1],s=e.slice(h,a.index).trim();m=m||s.indexOf(u)>-1;const r=m?l(s):s;p+=`${r} ${t} `,h=g.lastIndex}const $=e.substring(h);return m=m||$.indexOf(u)>-1,p+=m?l($):$,c(i.placeholders,p)},G=(e,t,s,r)=>e.split(",").map((e=>r&&e.indexOf("."+r)>-1?e.trim():y(e,t)?F(e,t,s).trim():e.trim())).join(", "),J=(e,t,s,r,c)=>C(e,(e=>{let c=e.selector,o=e.content;"@"!==e.selector[0]?c=G(e.selector,t,s,r):(e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document"))&&(o=J(e.content,t,s,r));const n={selector:c.replace(/\s{2,}/g," ").trim(),content:o};return n})),N=(e,t,s,r,c)=>{e=U(e),e=H(e),e=M(e);const o=K(e,r);return e=o.cssText,e=q(e),t&&(e=J(e,t,s,r)),e=e.replace(/-shadowcsshost-no-combinator/g,`.${s}`),e=e.replace(/>\s*\*\s+([^{, ]+)/gm," $1 "),{cssText:e.trim(),slottedSelectors:o.selectors}},P=(e,t,s)=>{const r=t+"-h",c=t+"-s",o=W(e);e=b(e);const n=[];if(s){const t=e=>{const t=`/*!@___${n.length}___*/`,s=`/*!@${e.selector}*/`;return n.push({placeholder:t,comment:s}),e.selector=t+e.selector,e};e=C(e,(e=>"@"!==e.selector[0]?t(e):e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document")?(e.content=C(e.content,t),e):e))}const l=N(e,t,r,c);return e=[l.cssText,...o].join("\n"),s&&n.forEach((({placeholder:t,comment:s})=>{e=e.replace(t,s)})),l.slottedSelectors.forEach((t=>{e=e.replace(t.orgSelector,t.updatedSelector)})),e}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekJLLEVBQUt2RCxTQUFTa0QsV0FBVyxjQUN6QkssRUFBSy9DLFFBQVVpQyxFQUFhYyxFQUFLL0MsUUFBU3lJLEdBQ25DMUYsR0FFSkEsR0FFZixDQUNBLE1BQU02RixFQUFTWCxFQUFhckUsRUFBU3NFLEVBQVNDLEVBQWF6RCxHQVUzRCxPQVRBZCxFQUFVLENBQUNnRixFQUFPaEYsV0FBWTJFLEdBQWtCL0UsS0FBSyxNQUNqRHdFLEdBQ0FRLEVBQWFLLFNBQVEsRUFBR0gsY0FBYUMsY0FDakMvRSxFQUFVQSxFQUFRakUsUUFBUStJLEVBQWFDLEVBQVEsSUFHdkRDLEVBQU9QLGlCQUFpQlEsU0FBUy9ELElBQzdCbEIsRUFBVUEsRUFBUWpFLFFBQVFtRixFQUFnQkcsWUFBYUgsRUFBZ0JNLGdCQUFnQixJQUVwRnhCLENBQU8sQyIsInNvdXJjZXMiOlsid2VicGFjazovL0hVQVQvLi9ub2RlX21vZHVsZXMvQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvc2hhZG93LWNzcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuIFN0ZW5jaWwgQ2xpZW50IFBsYXRmb3JtIHYyLjIyLjIgfCBNSVQgTGljZW5zZWQgfCBodHRwczovL3N0ZW5jaWxqcy5jb21cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqXG4gKiBUaGlzIGZpbGUgaXMgYSBwb3J0IG9mIHNoYWRvd0NTUyBmcm9tIHdlYmNvbXBvbmVudHMuanMgdG8gVHlwZVNjcmlwdC5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3dlYmNvbXBvbmVudHNqcy9ibG9iLzRlZmVjZDdlMGUvc3JjL1NoYWRvd0NTUy9TaGFkb3dDU1MuanNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvYmxvYi9tYXN0ZXIvcGFja2FnZXMvY29tcGlsZXIvc3JjL3NoYWRvd19jc3MudHNcbiAqL1xuY29uc3Qgc2FmZVNlbGVjdG9yID0gKHNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJzID0gW107XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICAvLyBSZXBsYWNlcyBhdHRyaWJ1dGUgc2VsZWN0b3JzIHdpdGggcGxhY2Vob2xkZXJzLlxuICAgIC8vIFRoZSBXUyBpbiBbYXR0cj1cInZhIGx1ZVwiXSB3b3VsZCBvdGhlcndpc2UgYmUgaW50ZXJwcmV0ZWQgYXMgYSBzZWxlY3RvciBzZXBhcmF0b3IuXG4gICAgc2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKC8oXFxbW15cXF1dKlxcXSkvZywgKF8sIGtlZXApID0+IHtcbiAgICAgICAgY29uc3QgcmVwbGFjZUJ5ID0gYF9fcGgtJHtpbmRleH1fX2A7XG4gICAgICAgIHBsYWNlaG9sZGVycy5wdXNoKGtlZXApO1xuICAgICAgICBpbmRleCsrO1xuICAgICAgICByZXR1cm4gcmVwbGFjZUJ5O1xuICAgIH0pO1xuICAgIC8vIFJlcGxhY2VzIHRoZSBleHByZXNzaW9uIGluIGA6bnRoLWNoaWxkKDJuICsgMSlgIHdpdGggYSBwbGFjZWhvbGRlci5cbiAgICAvLyBXUyBhbmQgXCIrXCIgd291bGQgb3RoZXJ3aXNlIGJlIGludGVycHJldGVkIGFzIHNlbGVjdG9yIHNlcGFyYXRvcnMuXG4gICAgY29uc3QgY29udGVudCA9IHNlbGVjdG9yLnJlcGxhY2UoLyg6bnRoLVstXFx3XSspKFxcKFteKV0rXFwpKS9nLCAoXywgcHNldWRvLCBleHApID0+IHtcbiAgICAgICAgY29uc3QgcmVwbGFjZUJ5ID0gYF9fcGgtJHtpbmRleH1fX2A7XG4gICAgICAgIHBsYWNlaG9sZGVycy5wdXNoKGV4cCk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgICAgIHJldHVybiBwc2V1ZG8gKyByZXBsYWNlQnk7XG4gICAgfSk7XG4gICAgY29uc3Qgc3MgPSB7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHBsYWNlaG9sZGVycyxcbiAgICB9O1xuICAgIHJldHVybiBzcztcbn07XG5jb25zdCByZXN0b3JlU2FmZVNlbGVjdG9yID0gKHBsYWNlaG9sZGVycywgY29udGVudCkgPT4ge1xuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2UoL19fcGgtKFxcZCspX18vZywgKF8sIGluZGV4KSA9PiBwbGFjZWhvbGRlcnNbK2luZGV4XSk7XG59O1xuY29uc3QgX3BvbHlmaWxsSG9zdCA9ICctc2hhZG93Y3NzaG9zdCc7XG5jb25zdCBfcG9seWZpbGxTbG90dGVkID0gJy1zaGFkb3djc3NzbG90dGVkJztcbi8vIG5vdGU6IDpob3N0LWNvbnRleHQgcHJlLXByb2Nlc3NlZCB0byAtc2hhZG93Y3NzaG9zdGNvbnRleHQuXG5jb25zdCBfcG9seWZpbGxIb3N0Q29udGV4dCA9ICctc2hhZG93Y3NzY29udGV4dCc7XG5jb25zdCBfcGFyZW5TdWZmaXggPSAnKSg/OlxcXFwoKCcgKyAnKD86XFxcXChbXikoXSpcXFxcKXxbXikoXSopKz8nICsgJylcXFxcKSk/KFteLHtdKiknO1xuY29uc3QgX2Nzc0NvbG9uSG9zdFJlID0gbmV3IFJlZ0V4cCgnKCcgKyBfcG9seWZpbGxIb3N0ICsgX3BhcmVuU3VmZml4LCAnZ2ltJyk7XG5jb25zdCBfY3NzQ29sb25Ib3N0Q29udGV4dFJlID0gbmV3IFJlZ0V4cCgnKCcgKyBfcG9seWZpbGxIb3N0Q29udGV4dCArIF9wYXJlblN1ZmZpeCwgJ2dpbScpO1xuY29uc3QgX2Nzc0NvbG9uU2xvdHRlZFJlID0gbmV3IFJlZ0V4cCgnKCcgKyBfcG9seWZpbGxTbG90dGVkICsgX3BhcmVuU3VmZml4LCAnZ2ltJyk7XG5jb25zdCBfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yID0gX3BvbHlmaWxsSG9zdCArICctbm8tY29tYmluYXRvcic7XG5jb25zdCBfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yUmUgPSAvLXNoYWRvd2Nzc2hvc3Qtbm8tY29tYmluYXRvcihbXlxcc10qKS87XG5jb25zdCBfc2hhZG93RE9NU2VsZWN0b3JzUmUgPSBbLzo6c2hhZG93L2csIC86OmNvbnRlbnQvZ107XG5jb25zdCBfc2VsZWN0b3JSZVN1ZmZpeCA9ICcoWz5cXFxcc34rWy4sezpdW1xcXFxzXFxcXFNdKik/JCc7XG5jb25zdCBfcG9seWZpbGxIb3N0UmUgPSAvLXNoYWRvd2Nzc2hvc3QvZ2ltO1xuY29uc3QgX2NvbG9uSG9zdFJlID0gLzpob3N0L2dpbTtcbmNvbnN0IF9jb2xvblNsb3R0ZWRSZSA9IC86OnNsb3R0ZWQvZ2ltO1xuY29uc3QgX2NvbG9uSG9zdENvbnRleHRSZSA9IC86aG9zdC1jb250ZXh0L2dpbTtcbmNvbnN0IF9jb21tZW50UmUgPSAvXFwvXFwqXFxzKltcXHNcXFNdKj9cXCpcXC8vZztcbmNvbnN0IHN0cmlwQ29tbWVudHMgPSAoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZShfY29tbWVudFJlLCAnJyk7XG59O1xuY29uc3QgX2NvbW1lbnRXaXRoSGFzaFJlID0gL1xcL1xcKlxccyojXFxzKnNvdXJjZShNYXBwaW5nKT9VUkw9W1xcc1xcU10rP1xcKlxcLy9nO1xuY29uc3QgZXh0cmFjdENvbW1lbnRzV2l0aEhhc2ggPSAoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gaW5wdXQubWF0Y2goX2NvbW1lbnRXaXRoSGFzaFJlKSB8fCBbXTtcbn07XG5jb25zdCBfcnVsZVJlID0gLyhcXHMqKShbXjtcXHtcXH1dKz8pKFxccyopKCg/OnslQkxPQ0slfT9cXHMqOz8pfCg/Olxccyo7KSkvZztcbmNvbnN0IF9jdXJseVJlID0gLyhbe31dKS9nO1xuY29uc3QgX3NlbGVjdG9yUGFydHNSZSA9IC8oXi4qP1teXFxcXF0pPz8oKDorKSguKil8JCkvO1xuY29uc3QgT1BFTl9DVVJMWSA9ICd7JztcbmNvbnN0IENMT1NFX0NVUkxZID0gJ30nO1xuY29uc3QgQkxPQ0tfUExBQ0VIT0xERVIgPSAnJUJMT0NLJSc7XG5jb25zdCBwcm9jZXNzUnVsZXMgPSAoaW5wdXQsIHJ1bGVDYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IGlucHV0V2l0aEVzY2FwZWRCbG9ja3MgPSBlc2NhcGVCbG9ja3MoaW5wdXQpO1xuICAgIGxldCBuZXh0QmxvY2tJbmRleCA9IDA7XG4gICAgcmV0dXJuIGlucHV0V2l0aEVzY2FwZWRCbG9ja3MuZXNjYXBlZFN0cmluZy5yZXBsYWNlKF9ydWxlUmUsICguLi5tKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gbVsyXTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICAgICAgbGV0IHN1ZmZpeCA9IG1bNF07XG4gICAgICAgIGxldCBjb250ZW50UHJlZml4ID0gJyc7XG4gICAgICAgIGlmIChzdWZmaXggJiYgc3VmZml4LnN0YXJ0c1dpdGgoJ3snICsgQkxPQ0tfUExBQ0VIT0xERVIpKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gaW5wdXRXaXRoRXNjYXBlZEJsb2Nrcy5ibG9ja3NbbmV4dEJsb2NrSW5kZXgrK107XG4gICAgICAgICAgICBzdWZmaXggPSBzdWZmaXguc3Vic3RyaW5nKEJMT0NLX1BMQUNFSE9MREVSLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgY29udGVudFByZWZpeCA9ICd7JztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjc3NSdWxlID0ge1xuICAgICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBydWxlID0gcnVsZUNhbGxiYWNrKGNzc1J1bGUpO1xuICAgICAgICByZXR1cm4gYCR7bVsxXX0ke3J1bGUuc2VsZWN0b3J9JHttWzNdfSR7Y29udGVudFByZWZpeH0ke3J1bGUuY29udGVudH0ke3N1ZmZpeH1gO1xuICAgIH0pO1xufTtcbmNvbnN0IGVzY2FwZUJsb2NrcyA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IGlucHV0UGFydHMgPSBpbnB1dC5zcGxpdChfY3VybHlSZSk7XG4gICAgY29uc3QgcmVzdWx0UGFydHMgPSBbXTtcbiAgICBjb25zdCBlc2NhcGVkQmxvY2tzID0gW107XG4gICAgbGV0IGJyYWNrZXRDb3VudCA9IDA7XG4gICAgbGV0IGN1cnJlbnRCbG9ja1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgcGFydEluZGV4ID0gMDsgcGFydEluZGV4IDwgaW5wdXRQYXJ0cy5sZW5ndGg7IHBhcnRJbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBpbnB1dFBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgIGlmIChwYXJ0ID09PSBDTE9TRV9DVVJMWSkge1xuICAgICAgICAgICAgYnJhY2tldENvdW50LS07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJyYWNrZXRDb3VudCA+IDApIHtcbiAgICAgICAgICAgIGN1cnJlbnRCbG9ja1BhcnRzLnB1c2gocGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudEJsb2NrUGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGVzY2FwZWRCbG9ja3MucHVzaChjdXJyZW50QmxvY2tQYXJ0cy5qb2luKCcnKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0UGFydHMucHVzaChCTE9DS19QTEFDRUhPTERFUik7XG4gICAgICAgICAgICAgICAgY3VycmVudEJsb2NrUGFydHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdFBhcnRzLnB1c2gocGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnQgPT09IE9QRU5fQ1VSTFkpIHtcbiAgICAgICAgICAgIGJyYWNrZXRDb3VudCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjdXJyZW50QmxvY2tQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVzY2FwZWRCbG9ja3MucHVzaChjdXJyZW50QmxvY2tQYXJ0cy5qb2luKCcnKSk7XG4gICAgICAgIHJlc3VsdFBhcnRzLnB1c2goQkxPQ0tfUExBQ0VIT0xERVIpO1xuICAgIH1cbiAgICBjb25zdCBzdHJFc2NhcGVkQmxvY2tzID0ge1xuICAgICAgICBlc2NhcGVkU3RyaW5nOiByZXN1bHRQYXJ0cy5qb2luKCcnKSxcbiAgICAgICAgYmxvY2tzOiBlc2NhcGVkQmxvY2tzLFxuICAgIH07XG4gICAgcmV0dXJuIHN0ckVzY2FwZWRCbG9ja3M7XG59O1xuY29uc3QgaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0ID0gKHNlbGVjdG9yKSA9PiB7XG4gICAgc2VsZWN0b3IgPSBzZWxlY3RvclxuICAgICAgICAucmVwbGFjZShfY29sb25Ib3N0Q29udGV4dFJlLCBfcG9seWZpbGxIb3N0Q29udGV4dClcbiAgICAgICAgLnJlcGxhY2UoX2NvbG9uSG9zdFJlLCBfcG9seWZpbGxIb3N0KVxuICAgICAgICAucmVwbGFjZShfY29sb25TbG90dGVkUmUsIF9wb2x5ZmlsbFNsb3R0ZWQpO1xuICAgIHJldHVybiBzZWxlY3Rvcjtcbn07XG5jb25zdCBjb252ZXJ0Q29sb25SdWxlID0gKGNzc1RleHQsIHJlZ0V4cCwgcGFydFJlcGxhY2VyKSA9PiB7XG4gICAgLy8gbVsxXSA9IDpob3N0KC1jb250ZXh0KSwgbVsyXSA9IGNvbnRlbnRzIG9mICgpLCBtWzNdIHJlc3Qgb2YgcnVsZVxuICAgIHJldHVybiBjc3NUZXh0LnJlcGxhY2UocmVnRXhwLCAoLi4ubSkgPT4ge1xuICAgICAgICBpZiAobVsyXSkge1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBtWzJdLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IHBhcnRzW2ldLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAoIXApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHIucHVzaChwYXJ0UmVwbGFjZXIoX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvciwgcCwgbVszXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHIuam9pbignLCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IgKyBtWzNdO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3QgY29sb25Ib3N0UGFydFJlcGxhY2VyID0gKGhvc3QsIHBhcnQsIHN1ZmZpeCkgPT4ge1xuICAgIHJldHVybiBob3N0ICsgcGFydC5yZXBsYWNlKF9wb2x5ZmlsbEhvc3QsICcnKSArIHN1ZmZpeDtcbn07XG5jb25zdCBjb252ZXJ0Q29sb25Ib3N0ID0gKGNzc1RleHQpID0+IHtcbiAgICByZXR1cm4gY29udmVydENvbG9uUnVsZShjc3NUZXh0LCBfY3NzQ29sb25Ib3N0UmUsIGNvbG9uSG9zdFBhcnRSZXBsYWNlcik7XG59O1xuY29uc3QgY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlciA9IChob3N0LCBwYXJ0LCBzdWZmaXgpID0+IHtcbiAgICBpZiAocGFydC5pbmRleE9mKF9wb2x5ZmlsbEhvc3QpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9uSG9zdFBhcnRSZXBsYWNlcihob3N0LCBwYXJ0LCBzdWZmaXgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGhvc3QgKyBwYXJ0ICsgc3VmZml4ICsgJywgJyArIHBhcnQgKyAnICcgKyBob3N0ICsgc3VmZml4O1xuICAgIH1cbn07XG5jb25zdCBjb252ZXJ0Q29sb25TbG90dGVkID0gKGNzc1RleHQsIHNsb3RTY29wZUlkKSA9PiB7XG4gICAgY29uc3Qgc2xvdENsYXNzID0gJy4nICsgc2xvdFNjb3BlSWQgKyAnID4gJztcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbXTtcbiAgICBjc3NUZXh0ID0gY3NzVGV4dC5yZXBsYWNlKF9jc3NDb2xvblNsb3R0ZWRSZSwgKC4uLm0pID0+IHtcbiAgICAgICAgaWYgKG1bMl0pIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvdW5kID0gbVsyXS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCBzdWZmaXggPSBtWzNdO1xuICAgICAgICAgICAgY29uc3Qgc2xvdHRlZFNlbGVjdG9yID0gc2xvdENsYXNzICsgY29tcG91bmQgKyBzdWZmaXg7XG4gICAgICAgICAgICBsZXQgcHJlZml4U2VsZWN0b3IgPSAnJztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBtWzRdIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gbVs1XVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJ30nIHx8IGNoYXIgPT09ICcsJykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJlZml4U2VsZWN0b3IgPSBjaGFyICsgcHJlZml4U2VsZWN0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcmdTZWxlY3RvciA9IHByZWZpeFNlbGVjdG9yICsgc2xvdHRlZFNlbGVjdG9yO1xuICAgICAgICAgICAgY29uc3QgYWRkZWRTZWxlY3RvciA9IGAke3ByZWZpeFNlbGVjdG9yLnRyaW1SaWdodCgpfSR7c2xvdHRlZFNlbGVjdG9yLnRyaW0oKX1gO1xuICAgICAgICAgICAgaWYgKG9yZ1NlbGVjdG9yLnRyaW0oKSAhPT0gYWRkZWRTZWxlY3Rvci50cmltKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkU2VsZWN0b3IgPSBgJHthZGRlZFNlbGVjdG9yfSwgJHtvcmdTZWxlY3Rvcn1gO1xuICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3JnU2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRTZWxlY3RvcixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzbG90dGVkU2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvciArIG1bM107XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWxlY3RvcnMsXG4gICAgICAgIGNzc1RleHQsXG4gICAgfTtcbn07XG5jb25zdCBjb252ZXJ0Q29sb25Ib3N0Q29udGV4dCA9IChjc3NUZXh0KSA9PiB7XG4gICAgcmV0dXJuIGNvbnZlcnRDb2xvblJ1bGUoY3NzVGV4dCwgX2Nzc0NvbG9uSG9zdENvbnRleHRSZSwgY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcik7XG59O1xuY29uc3QgY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyA9IChjc3NUZXh0KSA9PiB7XG4gICAgcmV0dXJuIF9zaGFkb3dET01TZWxlY3RvcnNSZS5yZWR1Y2UoKHJlc3VsdCwgcGF0dGVybikgPT4gcmVzdWx0LnJlcGxhY2UocGF0dGVybiwgJyAnKSwgY3NzVGV4dCk7XG59O1xuY29uc3QgbWFrZVNjb3BlTWF0Y2hlciA9IChzY29wZVNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgbHJlID0gL1xcWy9nO1xuICAgIGNvbnN0IHJyZSA9IC9cXF0vZztcbiAgICBzY29wZVNlbGVjdG9yID0gc2NvcGVTZWxlY3Rvci5yZXBsYWNlKGxyZSwgJ1xcXFxbJykucmVwbGFjZShycmUsICdcXFxcXScpO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeKCcgKyBzY29wZVNlbGVjdG9yICsgJyknICsgX3NlbGVjdG9yUmVTdWZmaXgsICdtJyk7XG59O1xuY29uc3Qgc2VsZWN0b3JOZWVkc1Njb3BpbmcgPSAoc2VsZWN0b3IsIHNjb3BlU2VsZWN0b3IpID0+IHtcbiAgICBjb25zdCByZSA9IG1ha2VTY29wZU1hdGNoZXIoc2NvcGVTZWxlY3Rvcik7XG4gICAgcmV0dXJuICFyZS50ZXN0KHNlbGVjdG9yKTtcbn07XG5jb25zdCBpbmplY3RTY29waW5nU2VsZWN0b3IgPSAoc2VsZWN0b3IsIHNjb3BpbmdTZWxlY3RvcikgPT4ge1xuICAgIHJldHVybiBzZWxlY3Rvci5yZXBsYWNlKF9zZWxlY3RvclBhcnRzUmUsIChfLCBiZWZvcmUgPSAnJywgX2NvbG9uR3JvdXAsIGNvbG9uID0gJycsIGFmdGVyID0gJycpID0+IHtcbiAgICAgICAgcmV0dXJuIGJlZm9yZSArIHNjb3BpbmdTZWxlY3RvciArIGNvbG9uICsgYWZ0ZXI7XG4gICAgfSk7XG59O1xuY29uc3QgYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlID0gKHNlbGVjdG9yLCBzY29wZVNlbGVjdG9yLCBob3N0U2VsZWN0b3IpID0+IHtcbiAgICAvLyBJbiBBbmRyb2lkIGJyb3dzZXIsIHRoZSBsYXN0SW5kZXggaXMgbm90IHJlc2V0IHdoZW4gdGhlIHJlZ2V4IGlzIHVzZWQgaW4gU3RyaW5nLnJlcGxhY2UoKVxuICAgIF9wb2x5ZmlsbEhvc3RSZS5sYXN0SW5kZXggPSAwO1xuICAgIGlmIChfcG9seWZpbGxIb3N0UmUudGVzdChzZWxlY3RvcikpIHtcbiAgICAgICAgY29uc3QgcmVwbGFjZUJ5ID0gYC4ke2hvc3RTZWxlY3Rvcn1gO1xuICAgICAgICByZXR1cm4gc2VsZWN0b3JcbiAgICAgICAgICAgIC5yZXBsYWNlKF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3JSZSwgKF8sIHNlbGVjdG9yKSA9PiBpbmplY3RTY29waW5nU2VsZWN0b3Ioc2VsZWN0b3IsIHJlcGxhY2VCeSkpXG4gICAgICAgICAgICAucmVwbGFjZShfcG9seWZpbGxIb3N0UmUsIHJlcGxhY2VCeSArICcgJyk7XG4gICAgfVxuICAgIHJldHVybiBzY29wZVNlbGVjdG9yICsgJyAnICsgc2VsZWN0b3I7XG59O1xuY29uc3QgYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlID0gKHNlbGVjdG9yLCBzY29wZVNlbGVjdG9yLCBob3N0U2VsZWN0b3IpID0+IHtcbiAgICBjb25zdCBpc1JlID0gL1xcW2lzPShbXlxcXV0qKVxcXS9nO1xuICAgIHNjb3BlU2VsZWN0b3IgPSBzY29wZVNlbGVjdG9yLnJlcGxhY2UoaXNSZSwgKF8sIC4uLnBhcnRzKSA9PiBwYXJ0c1swXSk7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJy4nICsgc2NvcGVTZWxlY3RvcjtcbiAgICBjb25zdCBfc2NvcGVTZWxlY3RvclBhcnQgPSAocCkgPT4ge1xuICAgICAgICBsZXQgc2NvcGVkUCA9IHAudHJpbSgpO1xuICAgICAgICBpZiAoIXNjb3BlZFApIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAocC5pbmRleE9mKF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpID4gLTEpIHtcbiAgICAgICAgICAgIHNjb3BlZFAgPSBhcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUocCwgc2NvcGVTZWxlY3RvciwgaG9zdFNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSA6aG9zdCBzaW5jZSBpdCBzaG91bGQgYmUgdW5uZWNlc3NhcnlcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwLnJlcGxhY2UoX3BvbHlmaWxsSG9zdFJlLCAnJyk7XG4gICAgICAgICAgICBpZiAodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2NvcGVkUCA9IGluamVjdFNjb3BpbmdTZWxlY3Rvcih0LCBjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY29wZWRQO1xuICAgIH07XG4gICAgY29uc3Qgc2FmZUNvbnRlbnQgPSBzYWZlU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIHNlbGVjdG9yID0gc2FmZUNvbnRlbnQuY29udGVudDtcbiAgICBsZXQgc2NvcGVkU2VsZWN0b3IgPSAnJztcbiAgICBsZXQgc3RhcnRJbmRleCA9IDA7XG4gICAgbGV0IHJlcztcbiAgICBjb25zdCBzZXAgPSAvKCB8PnxcXCt8fig/IT0pKVxccyovZztcbiAgICAvLyBJZiBhIHNlbGVjdG9yIGFwcGVhcnMgYmVmb3JlIDpob3N0IGl0IHNob3VsZCBub3QgYmUgc2hpbW1lZCBhcyBpdFxuICAgIC8vIG1hdGNoZXMgb24gYW5jZXN0b3IgZWxlbWVudHMgYW5kIG5vdCBvbiBlbGVtZW50cyBpbiB0aGUgaG9zdCdzIHNoYWRvd1xuICAgIC8vIGA6aG9zdC1jb250ZXh0KGRpdilgIGlzIHRyYW5zZm9ybWVkIHRvXG4gICAgLy8gYC1zaGFkb3djc3Nob3N0LW5vLWNvbWJpbmF0b3JkaXYsIGRpdiAtc2hhZG93Y3NzaG9zdC1uby1jb21iaW5hdG9yYFxuICAgIC8vIHRoZSBgZGl2YCBpcyBub3QgcGFydCBvZiB0aGUgY29tcG9uZW50IGluIHRoZSAybmQgc2VsZWN0b3JzIGFuZCBzaG91bGQgbm90IGJlIHNjb3BlZC5cbiAgICAvLyBIaXN0b3JpY2FsbHkgYGNvbXBvbmVudC10YWc6aG9zdGAgd2FzIG1hdGNoaW5nIHRoZSBjb21wb25lbnQgc28gd2UgYWxzbyB3YW50IHRvIHByZXNlcnZlXG4gICAgLy8gdGhpcyBiZWhhdmlvciB0byBhdm9pZCBicmVha2luZyBsZWdhY3kgYXBwcyAoaXQgc2hvdWxkIG5vdCBtYXRjaCkuXG4gICAgLy8gVGhlIGJlaGF2aW9yIHNob3VsZCBiZTpcbiAgICAvLyAtIGB0YWc6aG9zdGAgLT4gYHRhZ1toXWAgKHRoaXMgaXMgdG8gYXZvaWQgYnJlYWtpbmcgbGVnYWN5IGFwcHMsIHNob3VsZCBub3QgbWF0Y2ggYW55dGhpbmcpXG4gICAgLy8gLSBgdGFnIDpob3N0YCAtPiBgdGFnIFtoXWAgKGB0YWdgIGlzIG5vdCBzY29wZWQgYmVjYXVzZSBpdCdzIGNvbnNpZGVyZWQgcGFydCBvZiBhXG4gICAgLy8gICBgOmhvc3QtY29udGV4dCh0YWcpYClcbiAgICBjb25zdCBoYXNIb3N0ID0gc2VsZWN0b3IuaW5kZXhPZihfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKSA+IC0xO1xuICAgIC8vIE9ubHkgc2NvcGUgcGFydHMgYWZ0ZXIgdGhlIGZpcnN0IGAtc2hhZG93Y3NzaG9zdC1uby1jb21iaW5hdG9yYCB3aGVuIGl0IGlzIHByZXNlbnRcbiAgICBsZXQgc2hvdWxkU2NvcGUgPSAhaGFzSG9zdDtcbiAgICB3aGlsZSAoKHJlcyA9IHNlcC5leGVjKHNlbGVjdG9yKSkgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgc2VwYXJhdG9yID0gcmVzWzFdO1xuICAgICAgICBjb25zdCBwYXJ0ID0gc2VsZWN0b3Iuc2xpY2Uoc3RhcnRJbmRleCwgcmVzLmluZGV4KS50cmltKCk7XG4gICAgICAgIHNob3VsZFNjb3BlID0gc2hvdWxkU2NvcGUgfHwgcGFydC5pbmRleE9mKF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpID4gLTE7XG4gICAgICAgIGNvbnN0IHNjb3BlZFBhcnQgPSBzaG91bGRTY29wZSA/IF9zY29wZVNlbGVjdG9yUGFydChwYXJ0KSA6IHBhcnQ7XG4gICAgICAgIHNjb3BlZFNlbGVjdG9yICs9IGAke3Njb3BlZFBhcnR9ICR7c2VwYXJhdG9yfSBgO1xuICAgICAgICBzdGFydEluZGV4ID0gc2VwLmxhc3RJbmRleDtcbiAgICB9XG4gICAgY29uc3QgcGFydCA9IHNlbGVjdG9yLnN1YnN0cmluZyhzdGFydEluZGV4KTtcbiAgICBzaG91bGRTY29wZSA9IHNob3VsZFNjb3BlIHx8IHBhcnQuaW5kZXhPZihfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKSA+IC0xO1xuICAgIHNjb3BlZFNlbGVjdG9yICs9IHNob3VsZFNjb3BlID8gX3Njb3BlU2VsZWN0b3JQYXJ0KHBhcnQpIDogcGFydDtcbiAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlcnMgd2l0aCB0aGVpciBvcmlnaW5hbCB2YWx1ZXNcbiAgICByZXR1cm4gcmVzdG9yZVNhZmVTZWxlY3RvcihzYWZlQ29udGVudC5wbGFjZWhvbGRlcnMsIHNjb3BlZFNlbGVjdG9yKTtcbn07XG5jb25zdCBzY29wZVNlbGVjdG9yID0gKHNlbGVjdG9yLCBzY29wZVNlbGVjdG9yVGV4dCwgaG9zdFNlbGVjdG9yLCBzbG90U2VsZWN0b3IpID0+IHtcbiAgICByZXR1cm4gc2VsZWN0b3JcbiAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgLm1hcCgoc2hhbGxvd1BhcnQpID0+IHtcbiAgICAgICAgaWYgKHNsb3RTZWxlY3RvciAmJiBzaGFsbG93UGFydC5pbmRleE9mKCcuJyArIHNsb3RTZWxlY3RvcikgPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHNoYWxsb3dQYXJ0LnRyaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3JOZWVkc1Njb3Bpbmcoc2hhbGxvd1BhcnQsIHNjb3BlU2VsZWN0b3JUZXh0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZShzaGFsbG93UGFydCwgc2NvcGVTZWxlY3RvclRleHQsIGhvc3RTZWxlY3RvcikudHJpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNoYWxsb3dQYXJ0LnRyaW0oKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5qb2luKCcsICcpO1xufTtcbmNvbnN0IHNjb3BlU2VsZWN0b3JzID0gKGNzc1RleHQsIHNjb3BlU2VsZWN0b3JUZXh0LCBob3N0U2VsZWN0b3IsIHNsb3RTZWxlY3RvciwgY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpID0+IHtcbiAgICByZXR1cm4gcHJvY2Vzc1J1bGVzKGNzc1RleHQsIChydWxlKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY3RvciA9IHJ1bGUuc2VsZWN0b3I7XG4gICAgICAgIGxldCBjb250ZW50ID0gcnVsZS5jb250ZW50O1xuICAgICAgICBpZiAocnVsZS5zZWxlY3RvclswXSAhPT0gJ0AnKSB7XG4gICAgICAgICAgICBzZWxlY3RvciA9IHNjb3BlU2VsZWN0b3IocnVsZS5zZWxlY3Rvciwgc2NvcGVTZWxlY3RvclRleHQsIGhvc3RTZWxlY3Rvciwgc2xvdFNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoJ0BtZWRpYScpIHx8XG4gICAgICAgICAgICBydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoJ0BzdXBwb3J0cycpIHx8XG4gICAgICAgICAgICBydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoJ0BwYWdlJykgfHxcbiAgICAgICAgICAgIHJ1bGUuc2VsZWN0b3Iuc3RhcnRzV2l0aCgnQGRvY3VtZW50JykpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBzY29wZVNlbGVjdG9ycyhydWxlLmNvbnRlbnQsIHNjb3BlU2VsZWN0b3JUZXh0LCBob3N0U2VsZWN0b3IsIHNsb3RTZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3NzUnVsZSA9IHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3Rvci5yZXBsYWNlKC9cXHN7Mix9L2csICcgJykudHJpbSgpLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNzc1J1bGU7XG4gICAgfSk7XG59O1xuY29uc3Qgc2NvcGVDc3NUZXh0ID0gKGNzc1RleHQsIHNjb3BlSWQsIGhvc3RTY29wZUlkLCBzbG90U2NvcGVJZCwgY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpID0+IHtcbiAgICBjc3NUZXh0ID0gaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0KGNzc1RleHQpO1xuICAgIGNzc1RleHQgPSBjb252ZXJ0Q29sb25Ib3N0KGNzc1RleHQpO1xuICAgIGNzc1RleHQgPSBjb252ZXJ0Q29sb25Ib3N0Q29udGV4dChjc3NUZXh0KTtcbiAgICBjb25zdCBzbG90dGVkID0gY29udmVydENvbG9uU2xvdHRlZChjc3NUZXh0LCBzbG90U2NvcGVJZCk7XG4gICAgY3NzVGV4dCA9IHNsb3R0ZWQuY3NzVGV4dDtcbiAgICBjc3NUZXh0ID0gY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyhjc3NUZXh0KTtcbiAgICBpZiAoc2NvcGVJZCkge1xuICAgICAgICBjc3NUZXh0ID0gc2NvcGVTZWxlY3RvcnMoY3NzVGV4dCwgc2NvcGVJZCwgaG9zdFNjb3BlSWQsIHNsb3RTY29wZUlkKTtcbiAgICB9XG4gICAgY3NzVGV4dCA9IGNzc1RleHQucmVwbGFjZSgvLXNoYWRvd2Nzc2hvc3Qtbm8tY29tYmluYXRvci9nLCBgLiR7aG9zdFNjb3BlSWR9YCk7XG4gICAgY3NzVGV4dCA9IGNzc1RleHQucmVwbGFjZSgvPlxccypcXCpcXHMrKFteeywgXSspL2dtLCAnICQxICcpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNzc1RleHQ6IGNzc1RleHQudHJpbSgpLFxuICAgICAgICBzbG90dGVkU2VsZWN0b3JzOiBzbG90dGVkLnNlbGVjdG9ycyxcbiAgICB9O1xufTtcbmNvbnN0IHNjb3BlQ3NzID0gKGNzc1RleHQsIHNjb3BlSWQsIGNvbW1lbnRPcmlnaW5hbFNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgaG9zdFNjb3BlSWQgPSBzY29wZUlkICsgJy1oJztcbiAgICBjb25zdCBzbG90U2NvcGVJZCA9IHNjb3BlSWQgKyAnLXMnO1xuICAgIGNvbnN0IGNvbW1lbnRzV2l0aEhhc2ggPSBleHRyYWN0Q29tbWVudHNXaXRoSGFzaChjc3NUZXh0KTtcbiAgICBjc3NUZXh0ID0gc3RyaXBDb21tZW50cyhjc3NUZXh0KTtcbiAgICBjb25zdCBvcmdTZWxlY3RvcnMgPSBbXTtcbiAgICBpZiAoY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpIHtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0NvbW1lbnRlZFNlbGVjdG9yID0gKHJ1bGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gYC8qIUBfX18ke29yZ1NlbGVjdG9ycy5sZW5ndGh9X19fKi9gO1xuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IGAvKiFAJHtydWxlLnNlbGVjdG9yfSovYDtcbiAgICAgICAgICAgIG9yZ1NlbGVjdG9ycy5wdXNoKHsgcGxhY2Vob2xkZXIsIGNvbW1lbnQgfSk7XG4gICAgICAgICAgICBydWxlLnNlbGVjdG9yID0gcGxhY2Vob2xkZXIgKyBydWxlLnNlbGVjdG9yO1xuICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgIH07XG4gICAgICAgIGNzc1RleHQgPSBwcm9jZXNzUnVsZXMoY3NzVGV4dCwgKHJ1bGUpID0+IHtcbiAgICAgICAgICAgIGlmIChydWxlLnNlbGVjdG9yWzBdICE9PSAnQCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2Vzc0NvbW1lbnRlZFNlbGVjdG9yKHJ1bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocnVsZS5zZWxlY3Rvci5zdGFydHNXaXRoKCdAbWVkaWEnKSB8fFxuICAgICAgICAgICAgICAgIHJ1bGUuc2VsZWN0b3Iuc3RhcnRzV2l0aCgnQHN1cHBvcnRzJykgfHxcbiAgICAgICAgICAgICAgICBydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoJ0BwYWdlJykgfHxcbiAgICAgICAgICAgICAgICBydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoJ0Bkb2N1bWVudCcpKSB7XG4gICAgICAgICAgICAgICAgcnVsZS5jb250ZW50ID0gcHJvY2Vzc1J1bGVzKHJ1bGUuY29udGVudCwgcHJvY2Vzc0NvbW1lbnRlZFNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgc2NvcGVkID0gc2NvcGVDc3NUZXh0KGNzc1RleHQsIHNjb3BlSWQsIGhvc3RTY29wZUlkLCBzbG90U2NvcGVJZCk7XG4gICAgY3NzVGV4dCA9IFtzY29wZWQuY3NzVGV4dCwgLi4uY29tbWVudHNXaXRoSGFzaF0uam9pbignXFxuJyk7XG4gICAgaWYgKGNvbW1lbnRPcmlnaW5hbFNlbGVjdG9yKSB7XG4gICAgICAgIG9yZ1NlbGVjdG9ycy5mb3JFYWNoKCh7IHBsYWNlaG9sZGVyLCBjb21tZW50IH0pID0+IHtcbiAgICAgICAgICAgIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2UocGxhY2Vob2xkZXIsIGNvbW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2NvcGVkLnNsb3R0ZWRTZWxlY3RvcnMuZm9yRWFjaCgoc2xvdHRlZFNlbGVjdG9yKSA9PiB7XG4gICAgICAgIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2Uoc2xvdHRlZFNlbGVjdG9yLm9yZ1NlbGVjdG9yLCBzbG90dGVkU2VsZWN0b3IudXBkYXRlZFNlbGVjdG9yKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY3NzVGV4dDtcbn07XG5cbmV4cG9ydCB7IHNjb3BlQ3NzIH07XG4iXSwibmFtZXMiOlsic2FmZVNlbGVjdG9yIiwic2VsZWN0b3IiLCJwbGFjZWhvbGRlcnMiLCJpbmRleCIsInJlcGxhY2UiLCJfIiwia2VlcCIsInJlcGxhY2VCeSIsInB1c2giLCJjb250ZW50IiwicHNldWRvIiwiZXhwIiwic3MiLCJyZXN0b3JlU2FmZVNlbGVjdG9yIiwiX3BvbHlmaWxsSG9zdCIsIl9wb2x5ZmlsbFNsb3R0ZWQiLCJfcG9seWZpbGxIb3N0Q29udGV4dCIsIl9wYXJlblN1ZmZpeCIsIl9jc3NDb2xvbkhvc3RSZSIsIlJlZ0V4cCIsIl9jc3NDb2xvbkhvc3RDb250ZXh0UmUiLCJfY3NzQ29sb25TbG90dGVkUmUiLCJfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yIiwiX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvclJlIiwiX3NoYWRvd0RPTVNlbGVjdG9yc1JlIiwiX3NlbGVjdG9yUmVTdWZmaXgiLCJfcG9seWZpbGxIb3N0UmUiLCJfY29sb25Ib3N0UmUiLCJfY29sb25TbG90dGVkUmUiLCJfY29sb25Ib3N0Q29udGV4dFJlIiwiX2NvbW1lbnRSZSIsInN0cmlwQ29tbWVudHMiLCJpbnB1dCIsIl9jb21tZW50V2l0aEhhc2hSZSIsImV4dHJhY3RDb21tZW50c1dpdGhIYXNoIiwibWF0Y2giLCJfcnVsZVJlIiwiX2N1cmx5UmUiLCJfc2VsZWN0b3JQYXJ0c1JlIiwiT1BFTl9DVVJMWSIsIkNMT1NFX0NVUkxZIiwiQkxPQ0tfUExBQ0VIT0xERVIiLCJwcm9jZXNzUnVsZXMiLCJydWxlQ2FsbGJhY2siLCJpbnB1dFdpdGhFc2NhcGVkQmxvY2tzIiwiZXNjYXBlQmxvY2tzIiwibmV4dEJsb2NrSW5kZXgiLCJlc2NhcGVkU3RyaW5nIiwibSIsInN1ZmZpeCIsImNvbnRlbnRQcmVmaXgiLCJzdGFydHNXaXRoIiwiYmxvY2tzIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiY3NzUnVsZSIsInJ1bGUiLCJpbnB1dFBhcnRzIiwic3BsaXQiLCJyZXN1bHRQYXJ0cyIsImVzY2FwZWRCbG9ja3MiLCJicmFja2V0Q291bnQiLCJjdXJyZW50QmxvY2tQYXJ0cyIsInBhcnRJbmRleCIsInBhcnQiLCJqb2luIiwic3RyRXNjYXBlZEJsb2NrcyIsImluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dCIsImNvbnZlcnRDb2xvblJ1bGUiLCJjc3NUZXh0IiwicmVnRXhwIiwicGFydFJlcGxhY2VyIiwicGFydHMiLCJyIiwiaSIsInAiLCJ0cmltIiwiY29sb25Ib3N0UGFydFJlcGxhY2VyIiwiaG9zdCIsImNvbnZlcnRDb2xvbkhvc3QiLCJjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyIiwiaW5kZXhPZiIsImNvbnZlcnRDb2xvblNsb3R0ZWQiLCJzbG90U2NvcGVJZCIsInNsb3RDbGFzcyIsInNlbGVjdG9ycyIsImNvbXBvdW5kIiwic2xvdHRlZFNlbGVjdG9yIiwicHJlZml4U2VsZWN0b3IiLCJjaGFyIiwib3JnU2VsZWN0b3IiLCJhZGRlZFNlbGVjdG9yIiwidHJpbVJpZ2h0IiwidXBkYXRlZFNlbGVjdG9yIiwiY29udmVydENvbG9uSG9zdENvbnRleHQiLCJjb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzIiwicmVkdWNlIiwicmVzdWx0IiwicGF0dGVybiIsIm1ha2VTY29wZU1hdGNoZXIiLCJzY29wZVNlbGVjdG9yIiwibHJlIiwicnJlIiwic2VsZWN0b3JOZWVkc1Njb3BpbmciLCJyZSIsInRlc3QiLCJpbmplY3RTY29waW5nU2VsZWN0b3IiLCJzY29waW5nU2VsZWN0b3IiLCJiZWZvcmUiLCJfY29sb25Hcm91cCIsImNvbG9uIiwiYWZ0ZXIiLCJhcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUiLCJob3N0U2VsZWN0b3IiLCJsYXN0SW5kZXgiLCJhcHBseVN0cmljdFNlbGVjdG9yU2NvcGUiLCJpc1JlIiwiY2xhc3NOYW1lIiwiX3Njb3BlU2VsZWN0b3JQYXJ0Iiwic2NvcGVkUCIsInQiLCJzYWZlQ29udGVudCIsInJlcyIsInNjb3BlZFNlbGVjdG9yIiwic3RhcnRJbmRleCIsInNlcCIsImhhc0hvc3QiLCJzaG91bGRTY29wZSIsImV4ZWMiLCJzZXBhcmF0b3IiLCJzbGljZSIsInNjb3BlZFBhcnQiLCJzY29wZVNlbGVjdG9yVGV4dCIsInNsb3RTZWxlY3RvciIsIm1hcCIsInNoYWxsb3dQYXJ0Iiwic2NvcGVTZWxlY3RvcnMiLCJjb21tZW50T3JpZ2luYWxTZWxlY3RvciIsInNjb3BlQ3NzVGV4dCIsInNjb3BlSWQiLCJob3N0U2NvcGVJZCIsInNsb3R0ZWQiLCJzbG90dGVkU2VsZWN0b3JzIiwic2NvcGVDc3MiLCJjb21tZW50c1dpdGhIYXNoIiwib3JnU2VsZWN0b3JzIiwicHJvY2Vzc0NvbW1lbnRlZFNlbGVjdG9yIiwicGxhY2Vob2xkZXIiLCJjb21tZW50Iiwic2NvcGVkIiwiZm9yRWFjaCJdLCJzb3VyY2VSb290IjoiIn0=